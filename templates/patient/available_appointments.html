{% extends "base.html" %}

{% block content %}
<h1>Available Appointments: {{ specialization_name }}</h1>

<p>Showing available slots for **{{ appointment_date }}**.</p>

<div style="margin-top: 20px;">
    {% if doctors_with_slots %}
        {% for doctor_id, doctor_data in doctors_with_slots.items() %}
            <div style="border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
                <h3>Dr. {{ doctor_data['name'] }} ({{ doctor_data['specialization'] }})</h3>
                <p>Available Time Slots:</p>
                <div style="margin-top: 10px;">
                    {% for slot in doctor_data['slots'] %}
                        <form method="POST" action="{{ url_for('book_appointment', availability_id=slot['availability_id']) }}" style="display: inline-block; margin-right: 10px;">
                            <button type="submit" 
                                    style="padding: 8px 15px; background: #38761d; color: white; border: none; border-radius: 3px; cursor: pointer;"
                                    onclick="return confirm('Confirm booking with Dr. {{ doctor_data['name'] }} at {{ slot['time'] }}?')">
                                {{ slot['time'] }}
                            </button>
                        </form>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="alert alert-info">No available doctors found for your search criteria.</div>
    {% endif %}
</div>

<a href="{{ url_for('patient_dashboard') }}" style="display: inline-block; margin-top: 20px; padding: 10px; background: #007bff; color: white; text-decoration: none; border-radius: 5px;">
    ‚Üê Back to Dashboard
</a>

{% endblock %}